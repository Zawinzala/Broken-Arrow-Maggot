'人含量 1%，含量不如鸡尾酒'

[点击访问](https://zawinzala.github.io/Broken-Arrow-Maggot/)

# 🎯 Broken Arrow Maggot Index (断箭蛆指数)

**断箭蛆指数 (Broken Arrow Maggot Index)** 是一个基于 Web 的战绩分析工具，专为 RTS 游戏《断箭 (Broken Arrow)》设计。

它通过分析玩家最近的对局数据，计算出一个综合评分（**蛆指数**），直观地展示玩家是“带飞全场的神”还是“拖后腿的蛆”。

## ✨ 主要功能

* **📊 蛆指数计算**: 基于最近 12 场有效对局，通过复杂的加权算法（击杀、战损、占点、胜率）计算 1.0 (神) 到 10.0 (蛆) 的评分。
* **🏅 勋章系统 (v3.14 New)**: 自动识别并授予特殊称号（如：击杀王、送死王、大胃袋、奶妈、炸炸炸等）。
* **📈 趋势分析**: 可视化展示玩家近期的实力走向（变强/变弱/平稳）。
* **🔍 详细数据面板**:
* Elo 分数变化追踪。
* KD (击杀/死亡) 占比条形图。
* 占点贡献度。
* 胜率统计。


* **🕵️‍♂️ 玩家查询**: 支持 Steam64 ID 或游戏内数字 ID 查询，并在 v3.14 中集成了模糊昵称搜索功能。
* **🌍 多语言支持**: 内置中文和英文界面。

## 🚀 如何使用

1. 下载本项目中的 `index.html` 文件。
2. 直接在浏览器中打开该文件（无需服务器，纯前端实现）。
3. 在输入框中输入玩家的 **Steam64 ID**、**游戏内数字 ID** 或 **玩家昵称**。
4. 点击 **"开始检测" (ANALYZE)**。

---

## 📝 更新日志 / 版本对比说明

本项目经历了从 v2.4 (`old.html`) 到 v3.14 Integrated Edition (`index.html`) 的重大重构。以下是详细的改动说明：

### 1. 核心数据源迁移 (Data Source)

* **Old (v2.4):** 主要依赖 `batrace.aoeiaol.top` 的 API。
* **New (v3.14):**
* 迁移至 **Barmory.net** (STB API) 作为核心战绩数据源，数据更详尽（包含具体单位分、Elo 变动等）。
* 引入了 **Proxy 代理池** (`Codetabs`, `CorsProxy`, `AllOrigins`) 机制，解决了跨域 (CORS) 请求失败的问题，显著提高了查询成功率。
* 保留 `aoeiaol.top` 仅用于昵称反查 ID 功能。



### 2. UI/UX 界面重设计

* **视觉风格**:
* **Old:** 基础的深色模式，简单的表格布局。
* **New:** 采用 **Glassmorphism (毛玻璃)** 风格，更现代的卡片式设计，增加了大量 CSS 动画（如贴纸弹出、进度条加载）。


* **数据可视化**:
* **Old:** 仅展示简单的数值和 Rank 排名。
* **New:** 为每位玩家添加了 **三色条形图**（绿=击杀，红=损失，蓝=占点），直观对比贡献占比。


* **交互体验**:
* 新增了详细的加载进度条与状态提示。
* 新增了 ID 搜索模态框 (Modal)，体验更流畅。



### 3. 算法与逻辑增强

* **勋章系统 (Medal System)**:
* **New:** v3.14 新增了 `MEDAL_CONFIG`，能够计算 9 种不同的特定行为并颁发徽章：
* ⚔️ 击杀王 (Destruction)
* ☠️ 送死王 (Losses)
* 🍔 大胃袋 (资源消耗)
* 🚑 奶妈 (被盟友补给)
* 以及 💥 伤害输出、🛡️ 承伤等。




* **Elo 评分追踪**:
* **New:** 现在可以直接显示每一局的 Elo 分数变化 (`+15.2` / `-8.5`)，并据此过滤无效对局（如掉线局通常无 Elo 变化）。


* **排名计算优化**:
* **New:** 增加了对掉线/零分玩家的处理逻辑（强制视为 Rank 5 / 垫底），防止通过掉线逃避“蛆”评价。
* 增加了更丰富的维度统计：平均 KD 排名、爱兵如子排名（战损比）、平均占点排名。



### 4. 代码结构优化

* **Old:** 依赖 `parseTruncatedJSON` 处理可能截断的 JSON 数据，容错率较低。
* **New:** 使用 `robustFetch` 封装网络请求，包含自动重试和代理切换机制，代码健壮性大幅提升。

### 5. 功能移除与新增

* **移除**: 移除了俄语 (RU) 支持，专注于中/英双语优化。
* **新增**: “最近 12 局胜率”统计面板。
* **新增**: 结果页面顶部的个性化“贴纸” (Stickers)，根据玩家风格自动打标签（如：⚔️ 击杀为主、🚩 占点为主、🚀 最近变强）。

---

## 🛠️ 技术栈

* HTML5
* JavaScript (ES6+, Async/Await)
* [Tailwind CSS](https://tailwindcss.com/) (通过 CDN 引入)

## ⚠️ 免责声明

本工具仅供娱乐和战术分析使用。数据来源于第三方公开 API，不代表游戏官方立场。

---
